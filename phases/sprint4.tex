\section{Sprint 4}

\subsection{Sprint planning}

	This is the last sprint where new features will be implemented. We plan to implement the last 
	requirements which are all rated medium and low. Several necessary improvements and some new 
	features were discovered during the usability test held in sprint 3, and these will be implemented 
	in this sprint. Some time will also be spent fixing bugs.

\subsection{Duration and Workload}

\clearpage
\subsection{Sprint backlog}
	\begin{tabular}{| p{1.2cm} | p{8cm} | p{3cm} |}
		\hline
		\rowcolor{gray}
		ID & Description & Estimate \\ \hline
		FR1.2 &  The user should be able to exit the game at any time, and the game state should be saved and loaded when the user returns to the game. & \\ \hline

		FR1.4 & The user should get a highscore based on the time spent finishing the level. & \\ \hline

		FR1.5 & The user should be able to improve the highscore on any level by beating previous highscores. & \\ \hline

		FR1.6 & The user should be able to pause the game at any time. & \\ \hline

		FR1.7 & The game should play background music. & \\ \hline

		FR1.8 & The user should be able to turn on/off the background music. & \\ \hline

		FR1.9 & There should be played a sound effect when the player collects money. & \\ \hline

		FR1.10 & There should be played a sound effect when the player upgrades the powerplant. & \\ \hline

		FR1.11 & There should be played a sound effect when the player builds a power cable & \\ \hline

		FR1.13 & There should be a sound notification for when new obstacels appear. & \\ \hline

		FR1.14 & There should be played a sound effect when the player builds a power plant. & \\ \hline

		FR2.7 & The player should only be allowed to build a level-specific number of power plants. & \\ \hline

		FR2.9 & The houses should not appear on top of each other. & \\ \hline
		
		FR6.6 & A power preservation tip should appear when the user reaches a new level. & \\ \hline

		FR6.14 & The user should be able to click a button, and go into "powerline view mode", where the buildings aren't rendered and cannot be interacted with. This is to make it easier to see powerlines behind buildings etc. & \\ \hline
	\end{tabular}

\subsection{Implementation}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/splashscreen}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/mainmenu}
	}
	\caption{Splash screen when game starts and the game's main menu}
\end{figure}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/highscore}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/instructions}
	}
	\caption{Highscore and instruction screens}
\end{figure}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/game_start}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/mapoverview}
	}
	\caption{Message when starting a new level and an overview over the map during gameplay}
\end{figure}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/buildpowerplant}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/upgradepowerplant}
	}
	\caption{Build and upgrade powerplants}
\end{figure}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/buildpowercable}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/buildpowercable2}
	}
	\caption{Building a powercable}
\end{figure}

\begin{figure}[H]
	\centering
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/gameover}
	}
	\subfigure{
		\includegraphics[scale=0.18]{pictures/sprint4-screen/victory}
	}
	\caption{Gameover and victory screens}
\end{figure}

\subsection{Redesign and bug fixing}
	
	\subsubsection*{Changes to hud}
		**Made the hud static**
		After receiving feedback from the customer and through observations during the usability test in sprint 3, it was decided that the hud was going to be static, i.e. it was not going to be necessary to move it up in order to build.The two icons for building power plants and power lines were made slightly smaller to not make the screen look cluttered.
	\subsubsection*{Scaling GUI elements on Ios}
		**Make the elements fit on ios**
	\subsubsection*{Improvements on the appearance of buildings}
		**Changed map**
		A grid was added to the map...
	\subsubsection*{Input handling on Ios}
		**Fungerer nå på android og Ios**

\subsection{Testing}

	The following test cases were executed at the end of this sprint:

	\definecolor{lightgray}{gray}{0.9}

	\begin{tabular}{| p{3cm} | p{7cm} | p{2cm} |}
		\hline
		\rowcolor{lightgray}
		{\bf Test Case} & {\bf Result} & {\bf Pass/Retest} \\ \hline
		FT-15 Exit Game &  & \\ \hline
		FT-29 Highscore &  & \\ \hline
		FT-30 Pause Game &  & \\ \hline
		FT-31 Sound Effects &  & \\ \hline
		FT-32 Power Preservation Tip &  & \\ \hline
	\end{tabular}

	The following test cases did not pass previous tests and were retested this sprint:

	\begin{tabular}{| p{3cm} | p{7cm} | p{2cm} |}
		\hline
		\rowcolor{lightgray}
		{\bf Test Case} & {\bf Result} & {\bf Pass/Retest} \\ \hline
		FT-02 Appearance of buildings & & \\ \hline
		FT-05 Build Power Plants & & \\ \hline
		FT-06 Build Power Lines & & \\ \hline
		FT-20 Damaged Power Lines & & \\ \hline
	\end{tabular}

\subsection{Changes to the requirements}

	During testing early in the sprint it was discovered that despite the improvements on the appearance of buildings, i.e.the grid, new buildings could still appear on top of power lines, something which complicates removing and fixing these power lines, as well as making a clutter when building power lines to the buildings. An optimal solution would be to make another constraint on were buildings can appear regarding the power lines. As this was the last sprint and fixing this could be potentially difficult and time consuming, the group decided on another solution to this problem as seen  in requirement FR6.14.

	The fact that buildings should not appear on top of each other has finally been added as a requirement, and an additional sound effect requirement has been added.

	Requirement FR1.3 has been removed. The initial plan was that the player could play any level as long as he or she had completed the previous one, and chose which level to play from a menu of all levels. This would be demanding to implement and in addition the levels do not change character to a great extent, only the parameters are changed, from level to level. Therefore it was decided that we will operate with 'tetris-levels', i.e. the player always starts at level 1 and can enter higher levels by winning all previous levels without loosing. 

	{\bf Changes to version 4 of the requirement specification:} \\
	\begin{tabular}{| p{1.5cm} | p{12cm} |}
		\hline
		\rowcolor{lightgray}
		{\bf FR} & {\bf Change} \\ \hline
		FR1.3 & {\bf \color{red}[REMOVED]}The user should be able to restart any level at any given point of time after start playing. \\ \hline
		FR1.14 & {\bf \color{green}[NEW]} There should be played a sound effect when the player builds a power plant. \\ \hline
		FR2.9 & {\bf \color{green}[NEW]} The houses should not appear on top of each other. \\ \hline
		FR6.14 & {\bf \color{green}[NEW]} The user should be able to click a button, and go into "powerline view mode", where the buildings are not rendered and cannot be interacted with. This is to make it easier to see power lines behind buildings etc. \\ \hline
	\end{tabular}

\subsection{Group dynamics}

\subsection{Customer feedback}

\subsection{Sprint retrospective}
